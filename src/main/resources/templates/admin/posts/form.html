<!doctype html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head><title th:text="${title} ?: 'Post'">Post</title></head>
<body>
<div th:replace="~{layout/admin :: layout(${title} ?: 'Post','posts', ~{::section})}"></div>

<section class="grid gap-6">
  <h1 class="text-2xl font-semibold" th:text="${title}">Post</h1>

  <form th:action="@{/admin/posts/save}" method="post" th:object="${form}" class="grid gap-4 border rounded-2xl p-6">
    <input type="hidden" th:field="*{id}"/>
    <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>

    <label class="grid gap-1">
      <span>Título</span>
      <input class="border rounded p-2" th:field="*{titulo}" required/>
      <small class="text-red-600" th:if="${#fields.hasErrors('titulo')}" th:errors="*{titulo}"></small>
    </label>

    <label class="grid gap-1">
      <span>Resumen (máx. 280)</span>
      <textarea class="border rounded p-2" th:field="*{resumen}" rows="2"></textarea>
    </label>

    <label class="grid gap-1">
      <span>Contenido (Markdown)</span>
      <textarea class="border rounded p-2 font-mono text-sm" th:field="*{contenidoMd}" rows="12" required></textarea>
      <small class="text-slate-500">Admite Markdown (## Título, **negritas**, listas, enlaces...).</small>
    </label>

    <label class="grid gap-1">
      <span>Slug (opcional, si lo dejas vacío se genera)</span>
      <input class="border rounded p-2" th:field="*{slug}"/>
    </label>

    <label class="inline-flex items-center gap-2">
      <input type="checkbox" th:field="*{publicado}"/><span>Publicado</span>
    </label>

    <div class="flex gap-2">
      <button class="border rounded px-4 py-2">Guardar</button>
      <a class="border rounded px-4 py-2" href="/admin/posts">Cancelar</a>
    </div>
  </form>
</section>
</body>
</html>
